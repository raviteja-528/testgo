- name: Extract deleted resources from Python output
  set_fact:
    deleted_resources_list: "{{ deleted_resources_list + [ matched.resource_type ~ ': ' ~ matched.resource_name ] }}"
  vars:
    matched: >-
      {{
        {
          'resource_type': (item | regex_search('\\[DELETE\\] ([^ ]+)', '\\1')),
          'resource_name': (item | regex_search('-> (.*?) \\(', '\\1'))
        }
      }}
  loop: "{{ resource_output.stdout_lines }}"
  when: item is search('\\[DELETE\\]')
